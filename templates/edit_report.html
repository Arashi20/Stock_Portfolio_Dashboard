<!DOCTYPE html>
<html lang="en">

<head>
    {% include 'sidebar.html' %}
    <meta charset="UTF-8">
    <title>Edit Report</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <style>
        /* Quill toolbar customization */
        .ql-toolbar.ql-snow {
            background: #6D8A6D !important;
            border-radius: 8px 8px 0 0 !important;
            /* Only top corners rounded */
            border-bottom-left-radius: 0 !important;
            border-bottom-right-radius: 0 !important;
            border-color: #b5a77a !important;
        }

        .ql-toolbar.ql-snow .ql-picker,
        .ql-toolbar.ql-snow button {
            color: #2c2c2c !important;

            border: none;
        }

        .ql-toolbar.ql-snow .ql-picker-label,
        .ql-toolbar.ql-snow .ql-picker-options {
            color: #2c2c2c !important;
        }

        .ql-container.ql-snow {
            border-radius: 0 0 8px 8px !important;
            /* Only bottom corners rounded */
            background: #fff;
            font-size: 1.08rem;
            color: #2e2e1f;
            border-top-left-radius: 0 !important;
            border-top-right-radius: 0 !important;
        }
    </style>
</head>

<body>
    <header>
        <h1>Edit Report</h1>
    </header>
    <section>
        <form method="post" class="report-form">
            <label><strong>Ticker:</strong>
                <input type="text" name="ticker" value="{{ report.ticker }}" required class="beige-input">
            </label><br>
            <label><strong>Title:</strong>
                <input type="text" name="title" value="{{ report.title }}" required class="beige-input">
            </label><br>
            <strong>Notes/Analysis:</strong><br>
            <div id="editor" style="background: #fff; border-radius: 8px; min-height: 200px;">{{ report.snippet|safe }}
            </div>
            <input type="hidden" name="snippet" id="snippet">
            <br>
            <button type="submit"><strong>Update Report</strong></button>
        </form>
    </section>
    <a href="{{ url_for('reports_page') }}" class="back-link" style="
        display: inline-block;
        margin: 2rem auto;
        padding: 0.75rem 1.5rem;
        background: #1E3A34;
        color: #F8F5F0;
        text-align: center;
        text-decoration: none;
        border-radius: 4px;
        font-weight: bold;
        transition: background 0.3s, transform 0.3s;
    " onmouseover="this.style.background='#3b5d3a'; this.style.transform='scale(1.02)';"
        onmouseout="this.style.background='#1E3A34'; this.style.transform='scale(1)'">
        ‚Üê Back to Reports
    </a>

    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <script>
        var quill = new Quill('#editor', {
            theme: 'snow'
        });
        document.querySelector('form').onsubmit = function () {
            document.getElementById('snippet').value = quill.root.innerHTML;
        };
    </script>
</body>

</html>